<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Civitas</title>
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
  <!-- Nucleo Icons -->
  <link href="assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/33f8afc26e.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <!-- CSS Files -->
  <link id="pagestyle" href="assets/css/material-kit.css?v=3.0.0" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/style.css" rel="stylesheet">
</head>
<body>
  <!-- Navbar -->
  <div class="container position-sticky z-index-sticky top-0">
    <div class="row">
      <div class="col-12">
        <nav class="navbar navbar-expand-lg  blur border-radius-xl mt-4 top-0 z-index-3 shadow position-absolute my-3 py-2 start-0 end-0 mx-4">
          <div class="container-fluid px-0">
            <div class="dropdown">
              <a href="#" class="btn bg-gradient-light dropdown-toggle " data-bs-toggle="dropdown" id="navbarDropdownMenuLink2">
                  <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJnwANENjs3gP8ucWvO-eJ9lRUz3sPDY0hNg&usqp=CAU" class="location-icon"/>&nbsp;Civitas: <span id="com1"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink2">
                  <li>
                      <a class="dropdown-item" href="#">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJnwANENjs3gP8ucWvO-eJ9lRUz3sPDY0hNg&usqp=CAU" class="location-icon"/>&nbsp;<span id="com2"></span>
                      </a>
                  </li>
                  <li>
                      <a class="dropdown-item" href="#">
                        <img src="https://cdn.britannica.com/45/2345-004-CA9B0D10/flag-pine-tree-Massachusetts-state-field-arms-1971.jpg" class="location-icon"/>&nbsp;<span id="com3"></span>
                      </a>
                  </li>
                  <li>
                      <a class="dropdown-item" href="#">
                        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/a/a4/Flag_of_the_United_States.svg/1200px-Flag_of_the_United_States.svg.png" class="location-icon"/>&nbsp;USA
                      </a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#">
                      <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQQwwrpehWUb54OxB_P9mj-MN5d4QLgXMcu0w&usqp=CAU" class="location-icon"/>&nbsp;World
                    </a>
                </li>
              </ul>
            </div>
            <button class="navbar-toggler shadow-none ms-2" type="button" data-bs-toggle="collapse" data-bs-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon mt-2">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </span>
            </button>
            <div class="collapse navbar-collapse pt-3 pb-2 py-lg-0 w-100" id="navigation">
              <ul class="navbar-nav navbar-nav-hover ms-auto">
                <li class="nav-item mx-2">
                  <a class="nav-link ps-2 d-flex cursor-pointer align-items-center" href="volunteer.html">
                    <i class="fa-solid fa-handshake-angle"></i>
                    &nbsp;&nbsp;Volunteer
                  </a>
                </li>
                <li class="nav-item mx-2">
                  <a class="nav-link ps-2 d-flex cursor-pointer align-items-center" href="government.html">
                    <i class="fa-solid fa-democrat"></i>
                    &nbsp;&nbsp;Government
                  </a>
                </li>
                <li class="nav-item mx-2">
                  <a class="nav-link ps-2 d-flex cursor-pointer align-items-center" href="news.html">
                    <i class="fa-solid fa-newspaper"></i>
                    &nbsp;&nbsp;News
                  </a>
                </li>
                <li class="nav-item mx-2">
                  <a class="nav-link ps-2 d-flex cursor-pointer align-items-center" href="forum.html">
                    <i class="fa-solid fa-bullhorn"></i>
                    &nbsp;&nbsp;Forum
                  </a>
                </li>
                <li class="nav-item mx-2">
                  <a class="nav-link ps-2 d-flex cursor-pointer align-items-center" href="impact.html">
                    <i class="fa-solid fa-hand-fist"></i>
                    &nbsp;&nbsp;Impact
                  </a>
                </li>
                <li class="nav-item mx-2">
                  <a class="nav-link ps-2 d-flex cursor-pointer align-items-center" href="payitforward.html">
                    <i class="fa-solid fa-gift"></i>
                    &nbsp;&nbsp;Pay It Forward
                  </a>
                </li>
                <li class="nav-item mx-2">
                  <a href="javascript:;" id="logout" class="avatar avatar-sm rounded-circle">
                    <img alt="Image placeholder" src="./assets/img/team-4.jpg">
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
        <!-- End Navbar -->
      </div>
    </div>
  </div>
  <header>
    <div class="page-header min-vh-100" style="background-image: url(&#39;https://images.unsplash.com/photo-1520769945061-0a448c463865?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80&#39;);" loading="lazy">
      <span class="mask bg-gradient-dark opacity-5"></span>
      <div class="container">
        <div class="row">
          <div class="col-lg-6 col-md-7 d-flex justify-content-center flex-column">
            <h1 class="text-white mb-4">Hello, <span id="nameOfUser"></span>!</h1>
            <p class="text-white opacity-8 lead pe-5 me-5"><span id="typed"></span></p>
            <div class="buttons" id='buttonRow'>
              <button type="button" id='btn1' class="btn btn-white mt-4">What's new?</button>
              <button type="button" id='btn2' class="btn btn-white mt-4">How can I help?</button>
              <button type="button" id='btn3' class="btn btn-white mt-4">Who are you?</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  <!--   Core JS Files   -->
  <script src="assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="assets/js/core/bootstrap.min.js" type="text/javascript"></script>
  <script src="assets/js/plugins/perfect-scrollbar.min.js"></script>
  <!--  Plugin for Parallax, full documentation here: https://github.com/wagerfield/parallax  -->
  <script src="assets/js/plugins/parallax.min.js"></script>
  <!-- Control Center for Material UI Kit: parallax effects, scripts for the example pages etc -->
  <!--  Google Maps Plugin    -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTTfWur0PDbZWPr7Pmq8K3jiDp0_xUziI"></script>
  <script src="https://cdn.jsdelivr.net/npm/typed.js" type="text/javascript"></script>
  <script src="assets/js/material-kit.min.js?v=3.0.0" type="text/javascript"></script>
  <script src="assets/js/script.js"></script>
  <script src="../assets/js/material-kit.min.js?v=3.0.0" type="text/javascript"></script>
    <!-- Insert this script at the bottom of the HTML, but before you use any Firebase services -->
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.16.0/firebase-app.js'
  
      // If you enabled Analytics in your project, add the Firebase SDK for Google Analytics
      import { getAnalytics } from 'https://www.gstatic.com/firebasejs/9.16.0/firebase-analytics.js'
  
      // Add Firebase products that you want to use
      import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, updateProfile, signOut } from 'https://www.gstatic.com/firebasejs/9.16.0/firebase-auth.js'
      import { getFirestore, doc, getDoc } from 'https://www.gstatic.com/firebasejs/9.16.0/firebase-firestore.js'
      const firebaseConfig = {
        apiKey: "AIzaSyBu2vC4aQg6TvJ_9XicPOJhbp_NbyoH-6Y",
        authDomain: "civitas-4b8e7.firebaseapp.com",
        projectId: "civitas-4b8e7",
        storageBucket: "civitas-4b8e7.appspot.com",
        messagingSenderId: "702417617562",
        appId: "1:702417617562:web:e501a905826e7f09f2d523",
        measurementId: "G-4380018QSL"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const auth = getAuth();
      const db = getFirestore(app);
      let usr = '';
      let ops = [];
      let buttons = [];
      onAuthStateChanged(auth, (user) => {
        if (user) {
          const uid = user.uid;
          usr = user.displayName
          const nameRef = doc(db, 'users', user.displayName);
          getDoc(nameRef).then(nameSnap => {
            if(nameSnap.exists()) {
              document.getElementById('nameOfUser').innerHTML = nameSnap.data().name;
              document.getElementById('com1').innerHTML = nameSnap.data().coms[0];
              document.getElementById('com2').innerHTML = nameSnap.data().coms[0];
              document.getElementById('com3').innerHTML = nameSnap.data().coms[1];
              if(usr == 'slicerjeevs'){
                ops = ['Welcome back to Civitas. \nYou have earned 23 more points since last time!\nI’m excited to share that your previous community engagement\npost regarding the increase in light pollution over the past\nthree weeks near your home in Santa Clara, CA, gained traction.\nIs there any further information about your post you would like to know about',
                'I am always here for any other questions you might have :)', 'One of the people who interacted with your post, Rohan,\nwanted to connect with you about taking further action regarding the\nelectric tower change following your post.'];
                buttons=[['What\'s new?','More Info','I want to continue navigating'], ['Are there any other updates?', 'Who are you?', 'Has my request gone through'], ['Take me to the post', 'Thank you!', 'What going on in the world?']]
              }else{
                ops = ['Welcome back to Civitas. \nYou have earned 32 more points since last time!\nI’m excited to share that your previous community engagement post regarding the potholes that were near your home\n in Acton, MA, gained traction. Is there any further information about your\npost you would like to know about?',
                'You had an impressive 70 bookmarks made of your post, and 12 people\nstarted threads talking about your post.', 'You could create a new post about an issue near or\nfar from you that you’re passionate about. Spreading the word is your forte, considering how much interaction\nyou received on your last Forum post.'];
                buttons=[['What\'s new?','How can I help?','Who are you?'], ['How much interaction did I get?', 'How else can I make an impact?', 'No'], ['Let\'s go!', 'Thank you!', 'What going on in the world?']]
              }
            }
          });
          
        } else {
          window.open('/sign-in.html', '_self');
        }
      });

      function logOut(){
        signOut(auth).then(() => {
          console.log('sign out');
        })
      }
      function progress(){
        document.getElementById('typed').innerHTML = '';
        let buts = buttons.shift();
        document.getElementById('btn1').innerHTML = buts[0];
        document.getElementById('btn2').innerHTML = buts[1];
        document.getElementById('btn3').innerHTML = buts[2];
          var options = {
              strings: [ops.shift()],
              typeSpeed: 10,
              showCursor: false,
            };
          var typed = new Typed('#typed', options);
      }
      document.getElementById("logout").addEventListener("click", logOut);
      document.getElementById("buttonRow").addEventListener("click", progress);
      
    </script>
</body>
</html>